<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>图片懒加载</title>
<style>
 img {
 	border: 1px solid red;
 	width: 380px;
    height: 380px;
 }
 img:not(.load) {
 	border: 2px solid blue;
 	width: 380px;
    height: 380px;
 }
 .box {
 	visibility: hidden;
 	height: 100px;
 }
</style>
</head>
<body>
	<div class="box"></div>
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/1.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/2.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/3.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/4.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/5.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/6.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/7.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/8.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/9.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/10.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/11.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/12.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/13.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/14.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/15.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/16.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/17.jpg">
	<img src="http://p1.bqimg.com/567571/7289c13920048f23.gif" data-src = "http://cdn.jirengu.com/book.jirengu.com/img/18.jpg">

	<script src='jquery-3.1.1.min.js'></script>
    <script>
    	var a = 1;
    	check() // 刚开始就要检查一遍哪些元素已经出现在窗口之内，展示他们

    	$(window).on('scroll',check) // 滚动时再接着检查

    	function check(){
    		$('img').not('.load').each(function(){
    			if(isShow($(this))){
    				console.log($(this))
    				var $img = $(this)
    				setTimeout(function(){
    					console.log(1)
    					console.log($(this))
    					showImg($img)
    				},300)
    				
    			}
    		})
    	}

    	function isShow($node){
    		var scrollTop = $(window).scrollTop()
    		var windowHeight = $(window).height()
    		var offsetTop = $node.offset().top
    		var height = $node.outerHeight()
    		if(scrollTop+windowHeight > offsetTop && scrollTop < offsetTop + height){
    			return true
    		}
    		return false
    	}

    	function showImg($node){
    		var url = $node.attr('data-src')
    		$node.attr('src',url)
    		$node.addClass('load') // 性能优化，已经展示的图片加类，防止再次遍历检查
    	}
  	</script>
</body>
</html>